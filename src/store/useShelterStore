// src/store/useShelterStore.ts

import { create } from 'zustand';
import { fetchShelters } from '../api/fetchSheltersApi';
import { Shelter } from '../types/shelter'; 

// 스토어 인터페이스 정의
interface ShelterStore {
  shelters: Shelter[]; // 대피소 배열
  isLoading: boolean;
  error: string | null;
  fetchSheltersData: () => Promise<void>; // API 호출 메서드
}

// 스토어 생성
export const useShelterStore = create<ShelterStore>((set) => ({
  shelters: [],
  isLoading: false,
  error: null,

  // 비동기 함수
  fetchSheltersData: async () => {
    set({ isLoading: true, error: null });
    try {
      const data = await fetchShelters();
      set({ shelters: data, isLoading: false });
    } catch (err: any) {
      set({ error: err.message || '데이터 호출 실패', isLoading: false });
    }
  },
}));
